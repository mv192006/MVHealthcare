{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h1 class="h3">{{ patient }}</h1>
    <p class="text-muted">Phone: {{ patient.phone }} · Age: {{ patient.age }} · Gender: {{ patient.get_gender_display }}</p>
  </div>
  <div>
    <a class="btn btn-primary" href="{% url 'visit_create' patient.id %}">Add Visit</a>
    <a class="btn btn-outline-secondary" href="{% url 'patient_update' patient.id %}">Edit</a>
  </div>
</div>

<div class="card mb-3">
  <div class="card-body">
    <h2 class="h5">Address</h2>
    <p>{{ patient.address|default:"-" }}</p>
  </div>
</div>

<div class="card">
  <div class="card-header">Visit History</div>
  <ul class="list-group list-group-flush">
    {% for visit in visits %}
    <li class="list-group-item d-flex justify-content-between">
      <span>{{ visit.visit_date }} - {{ visit.diagnosis }}</span>
      <a href="{% url 'visit_detail' visit.id %}">View</a>
    </li>
    {% empty %}
    <li class="list-group-item">No visits yet.</li>
    {% endfor %}
  </ul>
</div>

<form method="post" action="{% url 'patient_delete' patient.id %}" class="mt-3">
  {% csrf_token %}
  <button class="btn btn-outline-danger" type="submit">Delete Patient</button>
</form>
{% endblock %}
